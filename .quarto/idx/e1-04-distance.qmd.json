{"title":"e1 Distance","markdown":{"headingText":"e1 Distance","containsRefs":false,"markdown":"\n```{r, message=FALSE}\nlibrary(tidyverse)\nlibrary(ez)\nlibrary(gt)\nlibrary(rsvg)\nlibrary(svglite)\n```\n\nwhat was the Euclidian distance between tree visits?\n\n```{r}\noptions(contrasts=c(\"contr.sum\",\"contr.poly\"))\noptions(dplyr.summarise.inform=F)\nknitr::opts_chunk$set(message = FALSE)\n```\n\n```{r}\nlibrary(tidyverse)\nlibrary(ez)\nlibrary(gt)\npd <- position_dodge(0.1)\n```\n\n```{r}\ne1 <- readRDS(\"001-00-e1-data.RDS\")\n\n# remove things from the raw data to make it suitable \n# for this particular analysis\n\n# remove samples that did not look at a tree\ne1 <- e1 %>% \n  filter(fl>0)\n\n# remove the second (and any subsequent) *consecutive* duplicates\ne1 <- e1 %>% \n  filter(is.na(tl != lag(tl)) | tl != lag(tl))\n\n# remove trials where they failed to get 10 fruit\ne1 <- e1 %>% \n  group_by(pp, te) %>% \n  mutate(max_fr = max(fr)) %>% \n  ungroup() %>% \n  filter(max_fr==10) %>% \n  select(-c(max_fr))\n```\n\nAnnotate: what was the Euclidian distance between tree visits?\n\nThis is sparse because not everything has fr of 0. Ok for the graph but not the ANoVA\n\n```{r}\ne1.distance <- e1\ne1.distance <- e1.distance %>%\n  group_by(across(c(ex,pp,rr,tb))) %>% \n  mutate(distance = sqrt((lead(xx)-xx)^2 + (lead(yy)-yy)^2)) %>% \n  ungroup()\n```\n\nCollapse over fruit-seeking events to yield mean distance at the stage:trial:launch level\n\n```{r}\ne1.distance.stl.means <- e1.distance %>% \n  group_by(ex, pp, rr, st, tb, ll) %>% \n  summarise(mean_distance = mean(distance, na.rm=TRUE))\n```\n\nCollapse over trials to yield stage:launch means\n\n```{r}\ne1.distance.sl.means <- e1.distance.stl.means %>% \n  group_by(ex, pp, rr, st, ll) %>% \n  summarise(mu_distance = mean(mean_distance))\n```\n\nSave plot data\n\n```{r}\nsaveRDS(e1.distance.sl.means, \"e1_distance_plot_data.rds\")\n```\n\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"e1-04-distance.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.313","theme":"cosmo","page-layout":"full"},"extensions":{"book":{"multiFile":true}}}}}